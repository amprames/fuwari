---
interface Props {
	class?: string;
	hasCover?: boolean;
}

const { class: className, hasCover = true } = Astro.props;
---

<div class:list={["card-base flex flex-col-reverse md:flex-col w-full rounded-[var(--radius-large)] overflow-hidden relative animate-pulse", className]}>
  <div class:list={["pl-6 md:pl-9 pr-6 md:pr-2 pt-6 md:pt-7 pb-6 relative", {"w-full md:w-[calc(100%_-_52px_-_12px)]": !hasCover, "w-full md:w-[calc(100%_-_28%_-_12px)]": hasCover}]}>
    
    <!-- Title skeleton -->
    <div class="mb-3">
      <div class="h-8 bg-[var(--skeleton-bg)] rounded-md w-3/4 mb-2"></div>
      <div class="h-8 bg-[var(--skeleton-bg)] rounded-md w-1/2"></div>
    </div>

    <!-- Metadata skeleton -->
    <div class="flex gap-2 mb-4">
      <div class="h-4 bg-[var(--skeleton-bg)] rounded w-20"></div>
      <div class="h-4 bg-[var(--skeleton-bg)] rounded w-16"></div>
      <div class="h-4 bg-[var(--skeleton-bg)] rounded w-24"></div>
    </div>

    <!-- Description skeleton -->
    <div class="mb-3.5">
      <div class="h-4 bg-[var(--skeleton-bg)] rounded w-full mb-2"></div>
      <div class="h-4 bg-[var(--skeleton-bg)] rounded w-4/5 mb-2"></div>
      <div class="h-4 bg-[var(--skeleton-bg)] rounded w-2/3"></div>
    </div>

    <!-- Word count skeleton -->
    <div class="flex gap-4">
      <div class="h-3 bg-[var(--skeleton-bg)] rounded w-16"></div>
      <div class="h-3 bg-[var(--skeleton-bg)] rounded w-1"></div>
      <div class="h-3 bg-[var(--skeleton-bg)] rounded w-20"></div>
    </div>
  </div>

  <!-- Cover image skeleton -->
  {hasCover && (
    <div class="max-h-[20vh] md:max-h-none mx-4 mt-4 -mb-2 md:mb-0 md:mx-0 md:mt-0 md:w-[28%] relative md:absolute md:top-3 md:bottom-3 md:right-3 rounded-xl overflow-hidden">
      <div class="w-full h-full bg-[var(--skeleton-bg)]"></div>
    </div>
  )}

  <!-- Enter button skeleton for posts without cover -->
  {!hasCover && (
    <div class="!hidden md:!flex w-[3.25rem] absolute right-3 top-3 bottom-3 rounded-xl bg-[var(--skeleton-bg)]"></div>
  )}
</div>

<style>
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
  
  .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
</style>