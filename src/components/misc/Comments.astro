---
interface Props {
	postSlug: string;
	class?: string;
}

const { postSlug, class: className } = Astro.props;
---

<div class:list={[className, "comments-section"]}>
	<h3 class="text-xl font-bold mb-4">Comentarios</h3>
	
	<!-- Comment Form -->
	<form class="comment-form mb-6 p-4 border border-gray-200 dark:border-gray-700 rounded-lg">
		<div class="mb-4">
			<label for="comment-name" class="block text-sm font-medium mb-2">
				Nombre *
			</label>
			<input
				type="text"
				id="comment-name"
				name="name"
				required
				class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"
			/>
		</div>
		
		<div class="mb-4">
			<label for="comment-email" class="block text-sm font-medium mb-2">
				Email *
			</label>
			<input
				type="email"
				id="comment-email"
				name="email"
				required
				class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"
			/>
		</div>
		
		<div class="mb-4">
			<label for="comment-message" class="block text-sm font-medium mb-2">
				Comentario *
			</label>
			<textarea
				id="comment-message"
				name="message"
				required
				rows="4"
				class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"
			></textarea>
		</div>
		
		<button
			type="submit"
			class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"
		>
			Enviar Comentario
		</button>
	</form>
	
	<!-- Comments List -->
	<div class="comments-list">
		<div class="comment-item p-4 border-b border-gray-200 dark:border-gray-700">
			<div class="flex justify-between items-start mb-2">
				<div>
					<h4 class="font-medium text-gray-900 dark:text-white">Juan Pérez</h4>
					<time class="text-sm text-gray-500 dark:text-gray-400">
						hace 2 horas
					</time>
				</div>
			</div>
			<p class="text-gray-700 dark:text-gray-300">
				Excelente artículo, muy útil para entender los conceptos. 
				Gracias por compartir esta información.
			</p>
		</div>
		
		<div class="comment-item p-4 border-b border-gray-200 dark:border-gray-700">
			<div class="flex justify-between items-start mb-2">
				<div>
					<h4 class="font-medium text-gray-900 dark:text-white">María García</h4>
					<time class="text-sm text-gray-500 dark:text-gray-400">
						hace 1 día
					</time>
				</div>
			</div>
			<p class="text-gray-700 dark:text-gray-300">
				Muy interesante el enfoque que propones. 
				¿Podrías profundizar más en el tema de la optimización?
			</p>
		</div>
	</div>
</div>

<script>
	// Basic comment form handling
	document.addEventListener('DOMContentLoaded', () => {
		const form = document.querySelector('.comment-form');
		
		if (form) {
			form.addEventListener('submit', (e) => {
				e.preventDefault();
				
				const formData = new FormData(form);
				const name = formData.get('name');
				const email = formData.get('email');
				const message = formData.get('message');
				
				// Basic validation
				if (!name || !email || !message) {
					alert('Por favor, completa todos los campos.');
					return;
				}
				
				// Here you would typically send the data to a backend
				console.log('Comment submitted:', { name, email, message });
				
				// Show success message
				alert('¡Comentario enviado! (Esta es una demostración)');
				
				// Reset form
				form.reset();
			});
		}
	});
</script>

<style>
	.comments-section {
		margin-top: 2rem;
	}
	
	.comment-form {
		background: var(--card-bg);
		border: 1px solid var(--border-color);
	}
	
	.comment-item {
		transition: background-color 0.2s ease;
	}
	
	.comment-item:hover {
		background-color: var(--btn-plain-bg-hover);
	}
	
	.comment-form input,
	.comment-form textarea {
		background: var(--input-bg);
		border-color: var(--border-color);
		color: var(--text-color);
	}
	
	.comment-form input:focus,
	.comment-form textarea:focus {
		border-color: var(--primary);
		box-shadow: 0 0 0 2px var(--primary-alpha);
	}
</style>
